<div class="row" *ngIf="devices | async as devices; else loading">
  <div class="col-sm-4" >
    <ng-container *ngIf="devices.length; else noDevices">
      <div class="device" *ngFor="let device of devices" [routerLink]="['view', device.key]"  routerLinkActive="active">
        <h2>
          {{ device.payload.val().name || device.key }}
          <a class="edit pull-right" [routerLink]="['edit', device.key]" (click)="stop($event)"  >
            <fa name="cog"></fa>
          </a>
        </h2>
        <section>
          {{ device.payload.val().desc  }}
        </section>
        <section>
          <small>
            Last seen: 
            {{ device.payload.val().latest.time * 1000 | timeAgo }}
          </small>
          <br>
          <small>
            Last data:
            {{ device.payload.val().latest.data.temperature.toFixed(2) }}&deg;C /
            {{ device.payload.val().latest.data.humidity.toFixed(2) }}%
          </small>
        </section>
      </div>
    </ng-container>
    <ng-template #noDevices>No devices yet!</ng-template>
  </div>

  <div class="col-md-8">
    <router-outlet></router-outlet>
  </div>
</div>
<ng-template #loading><app-loading></app-loading></ng-template>